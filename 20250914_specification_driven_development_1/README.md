# 仕様書駆動開発（Specification-Driven Development）勉強会資料

## 🔖 仕様書駆動開発とは

仕様書駆動開発（SDD）は、開発プロセスの中心に明確で詳細な仕様書を据える開発手法です。実装を開始する前に、システムの機能、動作、要件を記述した包括的な仕様書を作成し、この仕様書が開発チーム全体のコミュニケーションツールとなり、テストの基盤となることで、要件の明確化と品質向上を実現します。この手法では「誰が見ても、AIが見ても、その仕様書から常に同じプロダクトができる」ような詳細で曖昧さのない仕様書の作成に重点を置きます。

## ✨ 仕様書駆動開発のメリット

### 開発効率の向上
- **要件の明確化**: 開発の早い段階で要件が明確になるため、手戻りが減り、開発効率が向上
- **認識の統一**: チームメンバー間の認識のずれを最小限に抑制

### 品質の向上
- **バグの減少**: 詳細な仕様書に基づくテストにより、システムの品質が向上
- **設計の一貫性**: 仕様書が設計ガイドラインとして機能し、一貫したシステム構築が可能

### リスクの低減
- **開発リスクの軽減**: 仕様書が詳細であるため、開発中の予期せぬ問題や誤解が減少
- **変更管理の適正化**: 仕様書の変更は厳密に管理され、すべての関係者に共有

### コミュニケーションの改善
- **関係者間の合意**: 開発者、テスト担当者、ビジネスアナリスト、顧客など、すべての関係者間のコミュニケーションツールとして機能
- **ドキュメント化**: 仕様書自体がシステムの重要なドキュメントとなり、将来のメンテナンスや機能拡張に活用

## 📚 〇〇駆動開発の歴史

### AI時代以前の主要な駆動開発手法

| 手法名 | 中心要素 | 特徴と目的 |
|--------|----------|------------|
| **テスト駆動開発（TDD）** | テスト | コード記述前にテストを作成し、品質確保とリファクタリングを容易化 |
| **ビヘイビア駆動開発（BDD）** | 振る舞い・仕様 | ユーザーの行動やシステムの振る舞いを記述し、チームと顧客の共通理解を促進 |
| **機能駆動開発（FDD）** | 機能 | 機能単位の小さなイテレーションで開発を進め、進捗の可視化とリスク低減を実現 |
| **ドメイン駆動設計（DDD）** | ビジネス領域 | ビジネス領域の知識をソフトウェア設計に忠実に反映し、変更に強いシステムを構築 |
| **モデル駆動開発（MDD）** | モデル | UMLなどのモデルからコードを自動生成し、生産性向上と品質の均一化を実現 |
| **データ駆動開発** | データ | データの収集、分析、活用を中心に、根拠に基づいた意思決定と製品改善を推進 |
| **チケット駆動開発** | チケット | タスク管理ツールのチケットを起点に開発を進め、作業の効率化と漏れを防止 |

### AI時代（2020年代半ば以降）の新たな潮流

Claude CodeやCursorのようなAIコーディングアシスタントの登場により、新たな駆動開発手法が注目されています：

- **AI駆動開発**: AIが開発プロセスの中心となり、設計からデプロイまで全ライフサイクルでAI活用
- **LLM駆動開発**: 大規模言語モデルによる自然言語要件の解釈、コード生成、ドキュメント作成の自動化
- **AIペアプログラミング**: AIが開発者のパートナーとしてコード提案、レビュー、デバッグ支援を実行
- **AIアシスト開発**: AIによるコード補完、エラー検出、リファクタリング提案で開発者を支援

## 🚀 仕様書駆動開発の進め方

### 新規プロジェクトver

1. **初期設計書の作成**
   - プロジェクトの概要、画面遷移、データベース設計などを記載した`initial_instruction.md`（約300行）を作成
   - AIを活用しても良いが、あくまで初期の指示として位置づけ

2. **詳細仕様書の作成**
   - システムの機能、動作、要件を網羅した詳細な仕様書を作成
   - ユースケース、データモデル、API仕様、UI/UXデザインを具体的に記述

3. **仕様書のAI読み込み**
   - 作成した仕様書をAIが理解できる形式で読み込ませ
   - AIがシステム全体の構造や各機能の振る舞いを把握

4. **AIによる実装**
   - AIが仕様書に基づいて自動的にコードを生成し、システムを実装
   - バックエンド、データベース、フロントエンドの全体実装

5. **レビューと品質確認**
   - AIが生成したコードや実装されたシステムを人間がレビュー
   - 仕様書通りの機能、パフォーマンス、セキュリティを詳細確認

6. **追加要件への対応（コードを書かず仕様書を書く原則）**
   - 新たな要件や変更は直接コードを修正せず、仕様書を更新
   - 仕様書と実装の乖離を防ぎ、一貫性を保持

7. **差分読み込みと追加実装**
   - 更新された仕様書の差分のみをAIに読み込ませ
   - AIが変更部分を特定し、必要な修正や追加実装を実行

8. **定期的なリファクタリング**
   - システムの長期的な健全性を保つため、定期的にリファクタリングを実施
   - AIによるコード改善提案と自動適用

### 既存プロジェクトver

1. **現状分析と仕様書構成の検討**
   - 既存システムの分析と現状課題の洗い出し
   - 適切な粒度と項目での仕様書構成を検討

2. **ディレクトリ構成のリファクタリング**
   - AIがコードを生成・管理しやすいよう既存構成を整理
   - システム構造の明確化と効率的な作業環境の構築

3. **逆引き仕様書の作成**
   - 既存システムの機能や構造を分析し、現状を反映した仕様書を作成
   - 将来的な改修や機能追加を見据えた仕様の明確化

4. **仕様書のAI読み込み**
   - 作成された仕様書をAIに読み込ませ、既存システムの全体像を把握させ
   - AIと既存コードベースとの整合性確認

5. **AIによる段階的実装**
   - 新規機能追加や既存機能改修をプロジェクトニーズに応じて実施
   - 既存コードとの整合性を保ちながらの実装

6. **継続的なレビューと改善**
   - AIが生成したコードの継続的レビュー
   - 既存システムとの統合性と品質の確保

7. **追加要件への対応**
   - 新規要件は既存仕様書を更新する形で対応
   - 「コードを書かず仕様書を書く」原則の徹底

8. **差分管理と自動実装**
   - 仕様書差分のAI読み込みと自動実装
   - 既存システムへの影響を最小限に抑えた変更管理

9. **継続的なシステム改善**
   - 定期的なリファクタリングによる品質と保守性の維持・向上
   - AIによるコード改善提案の積極的活用

---

**核心理念**: 「誰が見てもAIが見ても、その仕様書から常に同じプロダクトができる、そんな仕様書を作ること」

仕様書駆動開発は、開発プロセスの自動化を促進し、人間の開発者がより創造的で戦略的な業務に集中できる環境を提供します。これにより、開発のリードタイム短縮、品質向上、そして継続的な改善サイクルを実現することが期待されます。

## 💡 実践Tips

### 🎯 仕様書駆動開発で最も重要な点

**絶対的な再現性**: その仕様書をどんなAIや人に渡しても全く同じものが出来上がること

仕様書駆動開発の成功の鍵は、詳細で曖昧さのない仕様書の作成にあります。ボタンの位置、共通したデザイン、機能の振る舞いまで、すべてが明確に定義されている必要があります。

### 🔧 効果的なプロンプト設計

仕様書作成時には、以下のプロンプトをAIへの指示の末尾に追加することを強く推奨します：

```
完成したら必ず自己レビューを入れてください。
そこで自己評価が90点以上でなければ再度修正してください。
自己レビューの軸は「その仕様書だけを10人に配って10人とも同じものができるか」としてください。再現性を第一にしてください。(ボタンの位置、共通したデザインなど)
不明点は確実になるまで質問してください。
```

**ポイント**:
- **自己レビュー**: AIに自己評価させることで品質向上
- **90点基準**: 高い品質基準の設定
- **10人テスト**: 再現性の具体的な指標
- **質問促進**: 不明点の積極的な確認

### 🤖 用途別推奨AIモデル

#### Initial Instruction → 仕様書作成
| 順位 | モデル | 推奨理由 |
|------|--------|----------|
| 🥇 **1位** | **Claude Opus 4.1** | 最高の理解力と仕様書作成能力 |
| 🥈 **2位** | **Gemini 2.5 Pro** | トークン節約したい場合の代替案 |
| 🥉 **3位** | **Claude Sonnet 4.1** | バランス重視の選択肢 |
| ❌ **非推奨** | GPT-5 | 仕様書作成においては性能が劣る |

#### 既存サービス → 仕様書作成
| 順位 | モデル | 推奨理由 |
|------|--------|----------|
| 🥇 **1位** | **Claude Opus 4.1** | 既存システム理解において最高性能 |
| 🥈 **2位** | **Claude Sonnet 4.1** | 最低限の品質を確保する代替案 |
| 💰 **コスト重視** | **Gemini 2.5 Pro** | データモデルなど明確な仕様部分に限定 |

#### 実装フェーズ
| 順位 | モデル | 推奨理由 |
|------|--------|----------|
| 🥇 **1位** | **Claude Opus 4.1** | 実装品質と精度において最優秀 |

### 📋 品質チェックリスト

仕様書作成時は以下の項目を必ずチェックしてください：

#### ✅ 再現性チェック
- [ ] ボタンの位置、サイズ、色が具体的に指定されている
- [ ] レイアウトが数値で明確に定義されている  
- [ ] フォントサイズ、行間、余白が具体的に記載されている
- [ ] 画面遷移のフローが詳細に説明されている
- [ ] エラーハンドリングの内容と表示方法が明確である

#### ✅ 機能仕様チェック
- [ ] 入力検証のルールが具体的に記載されている
- [ ] APIの仕様（リクエスト・レスポンス）が詳細に定義されている
- [ ] データ保存・取得の仕様が明確である
- [ ] 権限管理の仕組みが具体的に説明されている

#### ✅ 技術仕様チェック
- [ ] 使用する技術スタックが明確に指定されている
- [ ] ディレクトリ構成が詳細に定義されている
- [ ] 環境変数や設定ファイルの内容が具体的である
- [ ] デプロイ手順が段階的に記載されている

### 🎨 デザイン仕様のポイント

デザインの再現性を高めるために以下を明記：

1. **色指定**: HEXコードまたはRGB値で具体的に指定
2. **フォント**: フォントファミリー、サイズ、ウェイトを明確化
3. **余白・マージン**: px、rem、%などの単位を含めた数値で指定
4. **レスポンシブ**: ブレークポイントと各画面サイズでの振る舞いを詳述
5. **インタラクション**: ホバー、クリック、フォーカス時の状態変化を具体化

## 📋 勉強会議事録

### かずさんpresents AI仕様書駆動開発 Lightning Talk #3

**日時**: 2025年9月14日  
**発表者**: 田中一馬氏  
**参考URL**: https://tldv.io/app/meetings/68c659d208fc080013d367e4/

---

### 📝 会議概要

この会議は田中一馬氏によるAI駆動の開発手法に関するプレゼンテーションで、新しいプロジェクト開始時のAIを活用した仕様書作成プロセスについて詳細に議論されました。主な焦点は、AIツールを使用した効率的な仕様書作成、プロジェクト初期段階での開発アプローチ、および技術的な実装方法にありました。

### 🔑 AI仕様書駆動開発の主要概念

- **仕様書→AI実装の流れ**: 仕様書作成後は、その仕様書をもとにAIにプロジェクトの実装を依頼
- **エラー対応**: エラーが発生した場合は、エラーコードをコピーし、AIに修正を依頼
- **再現性の重視**: 誰が見ても同じプロダクトができる詳細な仕様書の作成を目指す

### 🤖 推奨AIツール

| ツール | 評価 | 用途 |
|--------|------|------|
| **Claude Opus** | 最高性能 | 仕様書作成において最も推奨 |
| **Claude Sonnet** | 高性能 | 状況に応じて使い分け |
| **GPT-2.5 Pro** | 高性能 | 状況に応じて使い分け |
| **Gemini 2.5 Pro** | 高性能 | 状況に応じて使い分け |

**推奨事項**: トークン消費の観点から、異なるAIモデルを状況に応じて使い分けることを推奨

### 🍽️ デモンストレーション - レシピアプリ開発

**開発背景**: 井川結花氏のニーズに基づき、1週間分の作り置きメニューを提案するアプリを開発

**主要機能**:
- 冷蔵庫の食材を入力することで、適切なレシピを生成する機能を実装
- 現在はプロトタイプでモック状態で動作
- 今後データベース連携を予定

### 💡 開発における重要な観点

1. **仕様書の品質と再現性を重視**
2. **徹底的な質問と明確化**: 不明な点は徹底的に質問し、明確化することを推奨
3. **言語選択**: イニシャルインストラクションは英語で書くと精度が向上する可能性
4. **継続的改善**: 定期的な仕様書のリファクタリングが必要

### 📋 アクションアイテム

#### 次回会議予定事項
- [ ] 既存プロジェクトへのAI仕様書駆動開発の適用方法を議論

#### 技術的タスク
- [ ] レシピアプリのデータベース連携と機能拡張

#### 環境設定・登録事項
- [ ] CursorとClaudeへの登録
- [ ] Claudeのmaxプランへの加入検討

### 🎯 結論

田中一馬氏のAI仕様書駆動開発手法は、効率的で再現性の高いソフトウェア開発プロセスを提供し、チーム全体での導入を目指している。この手法により、開発者はより創造的で戦略的な業務に集中でき、開発効率の大幅な向上が期待される。