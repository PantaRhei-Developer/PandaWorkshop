# メニュー作り置き履歴画面仕様書

## 1. 画面概要
過去に生成したレシピの履歴を一覧表示し、再利用や詳細確認ができる画面。
検索・フィルタ機能により、目的のレシピを効率的に見つけることができます。

## 2. 画面レイアウト

### 2.1 ヘッダー部分
- **位置**: 画面上部全幅
- **高さ**: 70px
- **背景色**: #FF6B35
- **内容**:
  - 戻るボタン（左寄せ、「← レシピ画面へ」、白色、フォントサイズ16px）
  - タイトル「作り置き履歴」（中央、白色、フォントサイズ20px、太字）
  - 履歴削除ボタン（右寄せ、「すべて削除」、白色、フォントサイズ14px）

### 2.2 検索・フィルター部分
- **位置**: ヘッダー下
- **背景色**: #F8F9FA
- **パディング**: 20px
- **ボーダー**: 下部1px solid #E5E5E5

#### 検索バー
- **位置**: 左側
- **幅**: 300px（PC）、100%（モバイル）
- **高さ**: 40px
- **プレースホルダー**: 「レシピ名や食材で検索」
- **ボーダー**: 1px solid #DDD
- **角丸**: 20px
- **検索アイコン**: 右側に配置

#### フィルターボタン群（検索バー右側）
1. **期間フィルター**
   - ボタンテキスト：「期間 ▼」
   - ドロップダウン：今日、1週間、1ヶ月、すべて

2. **食材フィルター**
   - ボタンテキスト：「食材 ▼」
   - ドロップダウン：肉類、魚類、野菜、その他

3. **並び順**
   - ボタンテキスト：「新しい順 ▼」
   - ドロップダウン：新しい順、古い順、よく使う順

## 3. 履歴一覧表示

### 3.1 一覧レイアウト
- **背景色**: 白色
- **パディング**: 0px（カード間の区切りを明確に）
- **表示形式**: カードリスト形式

### 3.2 履歴カード仕様
- **サイズ**: 幅100%、高さ140px
- **背景色**: 白色
- **ボーダー**: 下部1px solid #F0F0F0
- **パディング**: 20px
- **ホバーエフェクト**: 背景色を#F8F9FAに変更

#### カード内容（左から右へのレイアウト）

1. **日付表示部**
   - **位置**: 左端
   - **幅**: 80px
   - **内容**:
     - 生成日（フォントサイズ18px、太字、#FF6B35色）
     - 時間（フォントサイズ12px、#666色）
   - **例**: 
     ```
     09/14
     15:30
     ```

2. **使用食材表示部**
   - **位置**: 日付の右
   - **幅**: 200px
   - **タイトル**: 「使用食材」（フォントサイズ12px、#888色）
   - **食材タグ**: 
     - 背景色: #F0F0F0
     - パディング: 4px 8px
     - 角丸: 12px
     - フォントサイズ: 11px
     - 最大3個表示、それ以上は「+2個」で省略

3. **レシピサムネイル部**
   - **位置**: 中央
   - **幅**: 300px
   - **タイトル**: 「今週のレシピ」（フォントサイズ14px、#333色）
   - **レシピ画像**: 7個の小さな画像を横並び表示
     - 各画像サイズ: 30px × 30px
     - 角丸: 4px
     - 間隔: 4px

4. **アクション部**
   - **位置**: 右端
   - **幅**: 120px
   - **ボタン配置**: 縦並び
   
   **再生成ボタン**
   - サイズ: 幅100px、高さ32px
   - 背景色: #FF6B35
   - 文字: 「再生成」（白色、フォントサイズ12px）
   - 角丸: 4px
   
   **詳細ボタン**
   - サイズ: 幅100px、高さ32px
   - 背景色: 白色
   - ボーダー: 1px solid #DDD
   - 文字: 「詳細」（#666色、フォントサイズ12px）
   - 角丸: 4px
   - 上マージン: 8px

## 4. 空状態表示

### 4.1 履歴が存在しない場合
- **イラスト**: 空の状態を表すイラスト（中央配置）
- **メッセージ**: 
  - 「まだ履歴がありません」（フォントサイズ18px、#666色）
  - 「レシピを生成して履歴を作りましょう」（フォントサイズ14px、#888色）
- **CTAボタン**: 「レシピを作る」→ レシピ画面へ遷移

### 4.2 検索結果が存在しない場合
- **メッセージ**: 「該当する履歴が見つかりません」
- **検索条件リセットボタン**: 「検索条件をリセット」

## 5. ページネーション

### 5.1 表示件数
- **1ページあたり**: 20件
- **読み込み方式**: 無限スクロール（Infinite Scroll）
- **ローディング**: 下部にスピナー表示

### 5.2 パフォーマンス考慮
- 画像の遅延読み込み（Lazy Loading）
- 仮想化リスト（Virtual List）の検討（履歴が多い場合）

## 6. モーダル・詳細表示

### 6.1 詳細モーダル
- **トリガー**: 詳細ボタンクリック、カードクリック
- **サイズ**: 幅800px、高さ600px
- **背景**: 半透明オーバーレイ
- **内容**:
  - 使用食材一覧
  - 7日分のレシピ詳細
  - 栄養情報
  - 調理手順

### 6.2 削除確認モーダル
- **トリガー**: 削除ボタンクリック
- **内容**: 「この履歴を削除してもよろしいですか？」
- **ボタン**: 「削除する」「キャンセル」

## 7. レスポンシブデザイン

### 7.1 デスクトップ（1024px以上）
- 上記仕様をそのまま適用

### 7.2 タブレット（768px〜1023px）
- カード高さ: 120px
- フィルター: 2行配置
- レシピサムネイル: 5個表示

### 7.3 モバイル（767px以下）
- カード高さ: 100px
- カードレイアウト: 縦積み構成
  - 上段: 日付 + アクションボタン
  - 下段: 食材タグ + レシピサムネイル（3個）
- フィルター: 折りたたみ式

## 8. インタラクション

### 8.1 検索機能
- **リアルタイム検索**: 500ms のデバウンス
- **検索対象**: レシピ名、食材名、メモ（将来拡張）
- **ハイライト**: 検索キーワードを結果内でハイライト

### 8.2 フィルター機能
- **複数選択可能**: 期間 × 食材の組み合わせ
- **適用方法**: 選択と同時に適用
- **結果件数表示**: 「○件見つかりました」

### 8.3 並び替え機能
- **新しい順**: 生成日時の降順（デフォルト）
- **古い順**: 生成日時の昇順
- **よく使う順**: 再生成回数の降順

## 9. データ管理

### 9.1 履歴データ構造
```
{
  id: string,
  userId: string,
  createdAt: timestamp,
  ingredients: string[],
  recipes: Recipe[],
  regenerationCount: number,
  isFavorite: boolean
}
```

### 9.2 削除機能
- **個別削除**: 各履歴の削除
- **一括削除**: 全履歴の削除
- **自動削除**: 30日経過した履歴の自動削除（設定可能）

## 10. 技術実装要件
- データ取得: useSWRによるキャッシュ管理
- 検索: クライアントサイド実装（将来的にはサーバーサイド検索）
- 画像最適化: Next.js Image component
- 無限スクロール: react-infinite-scroll-component

## 11. アクセシビリティ要件
- キーボードナビゲーション対応
- スクリーンリーダー対応（aria-label、alt属性）
- 十分なカラーコントラスト
- フォーカス管理（モーダル開閉時）
